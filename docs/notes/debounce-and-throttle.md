---
group:
  title: article
toc: content
---

# 防抖与节流

当我们在开发 Web 应用程序时，经常需要处理大量的用户输入和其他事件。这些事件可能会导致代码的频繁执行，从而影响应用程序的性能。为了解决这个问题，我们可以使用防抖和节流技术来减少事件的处理次数，提高应用程序的性能。

## 防抖

防抖是一种延迟执行技术，它可以确保在一定时间内只执行一次函数。防抖的实现方法是设置一个定时器，在延迟时间内如果再次触发事件，则重新计时定时器。当定时器到期时，才会真正执行函数。这样可以避免函数的频繁执行，并且可以确保只有最后一次触发事件的结果被处理。

以下是一个 JavaScript 实现的防抖函数：

```js
function debounce(fn, delay = 500) {
  let timer = null;
  // 原始函数的参数args
  return function (...args) {
    if (timer) clearTimeout(timer);
    timer = setTimeout(() => {
      // 绑定this
      fn.apply(this, args);
    }, delay);
  };
}
```

这个防抖函数接受两个参数：要执行的函数和延迟时间。在函数被调用时，它会清除之前的定时器并设置一个新的定时器，在延迟时间内如果再次调用该函数，则会重新计时定时器。当定时器到期时，才会真正执行函数。

## 节流

节流是一种限制函数执行频率的技术。它可以确保在一定时间内只执行一次函数。节流的实现方法是设置一个时间戳，在时间戳超过一定时间后才会执行函数。如果在该时间内再次触发事件，则不会执行函数。

以下是一个 JavaScript 实现的节流函数：

```js
function throttle(fn, delay = 500) {
  let timer = null;
  let lastTime = 0;
  return function (...args) {
    const now = Date.now();
    if (now - lastTime < delay) {
      clearTimeout(timer);
      timer = setTimeout(() => {
        lastTime = now;
        fn.apply(this, args);
      }, delay);
    } else {
      lastTime = now;
      fn.apply(this, args);
    }
  };
}
```

这个节流函数接受两个参数：要执行的函数和时间间隔。在函数被调用时，它会计算时间戳并判断是否超过了时间间隔。如果超过了时间间隔，则会立即执行函数。如果没有超过时间间隔，则会清除之前的定时器并设置一个新的定时器，在时间间隔内再次触发事件则不会执行函数，直到定时器到期后才会执行函数。

防抖和节流的应用场景

防抖和节流技术可以应用于需要限制函数执行频率的场景，例如：

频繁的 DOM 操作，比如窗口大小改变、滚动事件等。

用户输入，比如搜索框输入、鼠标拖动等。

网络请求，比如短时间内多次发送请求。

结论

防抖和节流是两种常用的优化 Web 应用程序性能的技术。它们可以有效地减少函数的执行次数，避免浪费资源和影响应用程序的性能。在实际开发中，我们应该根据具体场景选择合适的技术来优化应用程序的性能。
